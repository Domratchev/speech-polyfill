!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=17)}([function(e,t,n){"use strict";var r=n(22);n.d(t,"b",function(){return r.a}),n.d(t,"c",function(){return r.b}),n.d(t,"d",function(){return r.c}),n.d(t,"e",function(){return r.d}),n.d(t,"f",function(){return r.e}),n.d(t,"g",function(){return r.f}),n.d(t,"h",function(){return r.g}),n.d(t,"i",function(){return r.h});var o=n(23);n.d(t,"j",function(){return o.a}),n.d(t,"k",function(){return o.b}),n.d(t,"l",function(){return o.c}),n.d(t,"n",function(){return o.d}),n.d(t,"o",function(){return o.e}),n.d(t,"q",function(){return o.f});var i=n(7);n.d(t,"m",function(){return i.a}),n.d(t,"x",function(){return i.b});var s=n(24);n.d(t,"p",function(){return s.a});var u=n(1);n.d(t,"a",function(){return u.a});var c=n(25);n.d(t,"w",function(){return c.a});var a=n(8);n.d(t,"u",function(){return a.a});var d=n(2);n.d(t,"s",function(){return d.a});var f=n(26);n.d(t,"r",function(){return f.a});var l=(n(9),n(10),n(4));n.d(t,"v",function(){return l.a}),n.d(t,"y",function(){return l.b});var h=n(11);n.d(t,"t",function(){return h.a}),n.d(t,"z",function(){return h.b});var p=n(12);n.d(t,"A",function(){return p.a});var g=n(27);n.d(t,"B",function(){return g.a});var b=n(28);n.d(t,"C",function(){return b.a});var v=n(29);n.d(t,"D",function(){return v.a});var m=n(30);n.d(t,"E",function(){return m.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return s});var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=function(e){function t(t){var n=e.call(this,t)||this;return n.name="ArgumentNull",n.message=t,n}return r(t,e),t}(Error),i=function(e){function t(t){var n=e.call(this,t)||this;return n.name="InvalidOperation",n.message=t,n}return r(t,e),t}(Error),s=function(e){function t(t,n){var r=e.call(this,n)||this;return r.name=t+"ObjectDisposed",r.message=n,r}return r(t,e),t}(Error)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},o=function(){return r().replace(new RegExp("-","g"),"").toUpperCase()}},function(e,t,n){"use strict";var r=n(21);n.d(t,"a",function(){return r.a});var o=(n(31),n(5),n(6),n(32));n.d(t,"g",function(){return o.a});var i=n(13);n.d(t,"b",function(){return i.a}),n.d(t,"c",function(){return i.b}),n.d(t,"d",function(){return i.c}),n.d(t,"e",function(){return i.d}),n.d(t,"h",function(){return i.e}),n.d(t,"i",function(){return i.f}),n.d(t,"j",function(){return i.g});var s=n(35);n.d(t,"f",function(){return s.a});var u=n(36);n.d(t,"k",function(){return u.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r,o=n(2);!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(r||(r={}));var i=function(){function e(e,t){this.name=e,this.eventId=Object(o.a)(),this.eventTime=(new Date).toISOString(),this.eventType=t,this.metadata={}}return Object.defineProperty(e.prototype,"Name",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EventId",{get:function(){return this.eventId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EventTime",{get:function(){return this.eventTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EventType",{get:function(){return this.eventType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Metadata",{get:function(){return this.metadata},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e,t){this.headerName=e,this.token=t}return Object.defineProperty(e.prototype,"HeaderName",{get:function(){return this.headerName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Token",{get:function(){return this.token},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n.d(t,"f",function(){return c}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"k",function(){return l}),n.d(t,"i",function(){return h}),n.d(t,"h",function(){return p}),n.d(t,"j",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return v});var r,o=n(0),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(e){function t(t,n,r){void 0===r&&(r=o.v.Info);var i=e.call(this,t,r)||this;return i.requestId=n,i}return i(t,e),Object.defineProperty(t.prototype,"RequestId",{get:function(){return this.requestId},enumerable:!0,configurable:!0}),t}(o.y),u=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.result=r,o}return i(t,e),Object.defineProperty(t.prototype,"Result",{get:function(){return this.result},enumerable:!0,configurable:!0}),t}(s),c=function(e){function t(t,n,r){var o=e.call(this,"RecognitionTriggeredEvent",t)||this;return o.audioSourceId=n,o.audioNodeId=r,o}return i(t,e),Object.defineProperty(t.prototype,"AudioSourceId",{get:function(){return this.audioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),t}(s),a=function(e){function t(t,n,r){var o=e.call(this,"ListeningStartedEvent",t)||this;return o.audioSourceId=n,o.audioNodeId=r,o}return i(t,e),Object.defineProperty(t.prototype,"AudioSourceId",{get:function(){return this.audioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),t}(s),d=function(e){function t(t,n,r){var o=e.call(this,"ConnectingToServiceEvent",t)||this;return o.authFetchEventid=n,o.connectionId=r,o}return i(t,e),Object.defineProperty(t.prototype,"AuthFetchEventid",{get:function(){return this.authFetchEventid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ConnectionId",{get:function(){return this.connectionId},enumerable:!0,configurable:!0}),t}(s),f=function(e){function t(t,n,r,o,i){var s=e.call(this,"RecognitionStartedEvent",t)||this;return s.audioSourceId=n,s.audioNodeId=r,s.authFetchEventId=o,s.connectionId=i,s}return i(t,e),Object.defineProperty(t.prototype,"AudioSourceId",{get:function(){return this.audioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AuthFetchEventId",{get:function(){return this.authFetchEventId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ConnectionId",{get:function(){return this.connectionId},enumerable:!0,configurable:!0}),t}(s),l=function(e){function t(t,n){return e.call(this,"SpeechStartDetectedEvent",t,n)||this}return i(t,e),t}(u),h=function(e){function t(t,n){return e.call(this,"SpeechHypothesisEvent",t,n)||this}return i(t,e),t}(u),p=function(e){function t(t,n){return e.call(this,"SpeechEndDetectedEvent",t,n)||this}return i(t,e),t}(u),g=function(e){function t(t,n){return e.call(this,"SpeechSimplePhraseEvent",t,n)||this}return i(t,e),t}(u),b=function(e){function t(t,n){return e.call(this,"SpeechDetailedPhraseEvent",t,n)||this}return i(t,e),t}(u);!function(e){e[e.Success=0]="Success",e[e.AudioSourceError=1]="AudioSourceError",e[e.AudioSourceTimeout=2]="AudioSourceTimeout",e[e.AuthTokenFetchError=3]="AuthTokenFetchError",e[e.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",e[e.UnAuthorized=5]="UnAuthorized",e[e.ConnectTimeout=6]="ConnectTimeout",e[e.ConnectError=7]="ConnectError",e[e.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",e[e.UnknownError=9]="UnknownError"}(r||(r={}));var v=function(e){function t(t,n,i,s,u,c,a,d){var f=e.call(this,"RecognitionEndedEvent",t,a===r.Success?o.v.Info:o.v.Error)||this;return f.audioSourceId=n,f.audioNodeId=i,f.connectionId=u,f.authFetchEventId=s,f.status=a,f.error=d,f.serviceTag=c,f}return i(t,e),Object.defineProperty(t.prototype,"AudioSourceId",{get:function(){return this.audioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AuthFetchEventId",{get:function(){return this.authFetchEventId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ConnectionId",{get:function(){return this.connectionId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ServiceTag",{get:function(){return this.serviceTag},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Status",{get:function(){return this.status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Error",{get:function(){return this.error},enumerable:!0,configurable:!0}),t}(s)},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return s});var r,o=n(1),i=n(2);!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(r||(r={}));var s=function(){function e(e,t,n,s){if(this.body=null,e===r.Text&&t&&"string"!=typeof t)throw new o.b("Payload must be a string");if(e===r.Binary&&t&&!(t instanceof ArrayBuffer))throw new o.b("Payload must be ArrayBuffer");this.messageType=e,this.body=t,this.headers=n||{},this.id=s||Object(i.a)()}return Object.defineProperty(e.prototype,"MessageType",{get:function(){return this.messageType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Headers",{get:function(){return this.headers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Body",{get:function(){return this.body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TextBody",{get:function(){if(this.messageType===r.Binary)throw new o.b("Not supported for binary message");return this.body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BinaryBody",{get:function(){if(this.messageType===r.Text)throw new o.b("Not supported for text message");return this.body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(2),i=function(){function e(e){var t=this;this.eventListeners={},this.isDisposed=!1,this.OnEvent=function(e){if(t.IsDisposed())throw new r.c("EventSource");if(t.Metadata)for(var n in t.Metadata)n&&e.Metadata&&(e.Metadata[n]||(e.Metadata[n]=t.Metadata[n]));for(var o in t.eventListeners)o&&t.eventListeners[o]&&t.eventListeners[o](e)},this.Attach=function(e){var n=Object(o.a)();return t.eventListeners[n]=e,{Detach:function(){delete t.eventListeners[n]}}},this.AttachListener=function(e){return t.Attach(e.OnEvent)},this.IsDisposed=function(){return t.isDisposed},this.Dispose=function(){t.eventListeners=null,t.isDisposed=!0},this.metadata=e}return Object.defineProperty(e.prototype,"Metadata",{get:function(){return this.metadata},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1),o=function(){function e(){var e=this;this.store={},this.Get=function(t){if(!t)throw new r.a("key");return e.store[t]},this.GetOrAdd=function(t,n){if(!t)throw new r.a("key");return void 0===e.store[t]&&(e.store[t]=n),e.store[t]},this.Set=function(t,n){if(!t)throw new r.a("key");e.store[t]=n},this.Remove=function(t){if(!t)throw new r.a("key");void 0!==e.store[t]&&delete e.store[t]}}return e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1),o=function(){function e(t){var n=this;if(this.subscriptionIdCounter=0,this.addSubscriptions={},this.removeSubscriptions={},this.disposedSubscriptions={},this.disposeReason=null,this.Get=function(e){return n.ThrowIfDisposed(),n.list[e]},this.First=function(){return n.Get(0)},this.Last=function(){return n.Get(n.Length()-1)},this.Add=function(e){n.ThrowIfDisposed(),n.InsertAt(n.list.length,e)},this.InsertAt=function(e,t){n.ThrowIfDisposed(),0===e?n.list.unshift(t):e===n.list.length?n.list.push(t):n.list.splice(e,0,t),n.TriggerSubscriptions(n.addSubscriptions)},this.RemoveFirst=function(){return n.ThrowIfDisposed(),n.RemoveAt(0)},this.RemoveLast=function(){return n.ThrowIfDisposed(),n.RemoveAt(n.Length()-1)},this.RemoveAt=function(e){return n.ThrowIfDisposed(),n.Remove(e,1)[0]},this.Remove=function(e,t){n.ThrowIfDisposed();var r=n.list.splice(e,t);return n.TriggerSubscriptions(n.removeSubscriptions),r},this.Clear=function(){n.ThrowIfDisposed(),n.Remove(0,n.Length())},this.Length=function(){return n.ThrowIfDisposed(),n.list.length},this.OnAdded=function(e){n.ThrowIfDisposed();var t=n.subscriptionIdCounter++;return n.addSubscriptions[t]=e,{Detach:function(){delete n.addSubscriptions[t]}}},this.OnRemoved=function(e){n.ThrowIfDisposed();var t=n.subscriptionIdCounter++;return n.removeSubscriptions[t]=e,{Detach:function(){delete n.removeSubscriptions[t]}}},this.OnDisposed=function(e){n.ThrowIfDisposed();var t=n.subscriptionIdCounter++;return n.disposedSubscriptions[t]=e,{Detach:function(){delete n.disposedSubscriptions[t]}}},this.Join=function(e){return n.ThrowIfDisposed(),n.list.join(e)},this.ToArray=function(){var e=Array();return n.list.forEach(function(t){e.push(t)}),e},this.Any=function(e){return n.ThrowIfDisposed(),e?n.Where(e).Length()>0:n.Length()>0},this.All=function(e){return n.ThrowIfDisposed(),n.Where(e).Length()===n.Length()},this.ForEach=function(e){n.ThrowIfDisposed();for(var t=0;t<n.Length();t++)e(n.list[t],t)},this.Select=function(t){n.ThrowIfDisposed();for(var r=[],o=0;o<n.list.length;o++)r.push(t(n.list[o],o));return new e(r)},this.Where=function(t){n.ThrowIfDisposed();for(var r=new e,o=0;o<n.list.length;o++)t(n.list[o],o)&&r.Add(n.list[o]);return r},this.OrderBy=function(t){return n.ThrowIfDisposed(),new e(n.ToArray().sort(t))},this.OrderByDesc=function(e){return n.ThrowIfDisposed(),n.OrderBy(function(t,n){return e(n,t)})},this.Clone=function(){return n.ThrowIfDisposed(),new e(n.ToArray())},this.Concat=function(t){return n.ThrowIfDisposed(),new e(n.list.concat(t.ToArray()))},this.ConcatArray=function(t){return n.ThrowIfDisposed(),new e(n.list.concat(t))},this.IsDisposed=function(){return null==n.list},this.Dispose=function(e){n.IsDisposed()||(n.disposeReason=e,n.list=null,n.addSubscriptions=null,n.removeSubscriptions=null,n.TriggerSubscriptions(n.disposedSubscriptions))},this.ThrowIfDisposed=function(){if(n.IsDisposed())throw new r.c("List",n.disposeReason)},this.TriggerSubscriptions=function(e){if(e)for(var t in e)t&&e[t]()},this.list=[],t)for(var o=0,i=t;o<i.length;o++){var s=i[o];this.list.push(s)}}return e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return a});var r,o=n(1);!function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(r||(r={}));var i=function(){function e(e){var t=this;this.ThrowIfError=function(){if(t.IsError)throw t.Error},e.On(function(e){t.isCompleted||(t.isCompleted=!0,t.isError=!1,t.result=e)},function(e){t.isCompleted||(t.isCompleted=!0,t.isError=!0,t.error=e)})}return Object.defineProperty(e.prototype,"IsCompleted",{get:function(){return this.isCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsError",{get:function(){return this.isError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Error",{get:function(){return this.error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Result",{get:function(){return this.result},enumerable:!0,configurable:!0}),e}(),s=function(){function e(){var e=this;this.SetResult=function(t){e.onSetResult(t)},this.SetError=function(t){e.onSetError(t)},this.On=function(t,n){e.onSetResult=t,e.onSetError=n}}return e}(),u=function(){function e(){}return e.WhenAll=function(e){if(!e||0===e.length)throw new o.a("promises");for(var t=new a,n=[],r=0,i=function(){++r===e.length&&(0===n.length?t.Resolve(!0):t.Reject(n.join(", ")))},s=0,u=e;s<u.length;s++)u[s].On(function(e){i()},function(e){n.push(e),i()});return t.Promise()},e.FromResult=function(e){var t=new a;return t.Resolve(e),t.Promise()},e.FromError=function(e){var t=new a;return t.Reject(e),t.Promise()},e}(),c=function(){function e(e){var t=this;this.Result=function(){return t.sink.Result},this.ContinueWith=function(e){if(!e)throw new o.a("continuationCallback");var n=new a;return t.sink.on(function(r){try{var o=e(t.sink.Result);n.Resolve(o)}catch(e){n.Reject("'Unhandled callback error: "+e+"'")}},function(r){try{var o=e(t.sink.Result);n.Resolve(o)}catch(e){n.Reject("'Unhandled callback error: "+e+". InnerError: "+r+"'")}}),n.Promise()},this.OnSuccessContinueWith=function(e){if(!e)throw new o.a("continuationCallback");var n=new a;return t.sink.on(function(t){try{var r=e(t);n.Resolve(r)}catch(e){n.Reject("'Unhandled callback error: "+e+"'")}},function(e){n.Reject("'Unhandled callback error: "+e+"'")}),n.Promise()},this.ContinueWithPromise=function(e){if(!e)throw new o.a("continuationCallback");var n=new a;return t.sink.on(function(r){try{var o=e(t.sink.Result);if(!o)throw new Error("'Contuniation callback did not return promise'");o.On(function(e){n.Resolve(e)},function(e){n.Reject(e)})}catch(e){n.Reject("'Unhandled callback error: "+e+"'")}},function(r){try{var o=e(t.sink.Result);if(!o)throw new Error("Contuniation callback did not return promise");o.On(function(e){n.Resolve(e)},function(e){n.Reject(e)})}catch(e){n.Reject("'Unhandled callback error: "+e+". InnerError: "+r+"'")}}),n.Promise()},this.OnSuccessContinueWithPromise=function(e){if(!e)throw new o.a("continuationCallback");var n=new a;return t.sink.on(function(t){try{var r=e(t);if(!r)throw new Error("Contuniation callback did not return promise");r.On(function(e){n.Resolve(e)},function(e){n.Reject(e)})}catch(e){n.Reject("'Unhandled callback error: "+e+"'")}},function(e){n.Reject("'Unhandled callback error: "+e+".'")}),n.Promise()},this.On=function(e,n){if(!e)throw new o.a("successCallback");if(!n)throw new o.a("errorCallback");return t.sink.on(e,n),t},this.Finally=function(e){if(!e)throw new o.a("callback");var n=function(t){e()};return t.On(n,n)},this.sink=e}return e}(),a=function(){function e(){var e=this;this.State=function(){return e.sink.State},this.Promise=function(){return e.promise},this.Resolve=function(t){return e.sink.Resolve(t),e},this.Reject=function(t){return e.sink.Reject(t),e},this.sink=new d,this.promise=new c(this.sink)}return e}(),d=function(){function e(){var e=this;this.state=r.None,this.promiseResult=null,this.promiseResultEvents=null,this.successHandlers=[],this.errorHandlers=[],this.Resolve=function(t){if(e.state!==r.None)throw new Error("'Cannot resolve a completed promise'");e.state=r.Resolved,e.promiseResultEvents.SetResult(t);for(var n=0;n<e.successHandlers.length;n++)e.ExecuteSuccessCallback(t,e.successHandlers[n],e.errorHandlers[n]);e.DetachHandlers()},this.Reject=function(t){if(e.state!==r.None)throw new Error("'Cannot reject a completed promise'");e.state=r.Rejected,e.promiseResultEvents.SetError(t);for(var n=0,o=e.errorHandlers;n<o.length;n++){var i=o[n];e.ExecuteErrorCallback(t,i)}e.DetachHandlers()},this.on=function(t,n){null==t&&(t=function(e){}),e.state===r.None?(e.successHandlers.push(t),e.errorHandlers.push(n)):(e.state===r.Resolved?e.ExecuteSuccessCallback(e.promiseResult.Result,t,n):e.state===r.Rejected&&e.ExecuteErrorCallback(e.promiseResult.Error,n),e.DetachHandlers())},this.ExecuteSuccessCallback=function(t,n,r){try{n(t)}catch(t){e.ExecuteErrorCallback("'Unhandled callback error: "+t+"'",r)}},this.ExecuteErrorCallback=function(e,t){if(!t)throw new Error("'Unhandled error: "+e+"'");try{t(e)}catch(t){throw new Error("'Unhandled callback error: "+t+". InnerError: "+e+"'")}},this.DetachHandlers=function(){e.errorHandlers=[],e.successHandlers=[]},this.promiseResultEvents=new s,this.promiseResult=new i(this.promiseResultEvents)}return Object.defineProperty(e.prototype,"State",{get:function(){return this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Result",{get:function(){return this.promiseResult},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r,o=n(1),i=n(10),s=n(11);!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(r||(r={}));var u=function(){function e(e){var t=this;this.promiseStore=new i.a,this.isDrainInProgress=!1,this.isDisposing=!1,this.disposeReason=null,this.Enqueue=function(e){t.ThrowIfDispose(),t.EnqueueFromPromise(s.b.FromResult(e))},this.EnqueueFromPromise=function(e){t.ThrowIfDispose(),t.promiseStore.Add(e),e.Finally(function(){for(;t.promiseStore.Length()>0&&t.promiseStore.First().Result().IsCompleted;){var e=t.promiseStore.RemoveFirst();e.Result().IsError||t.list.Add(e.Result().Result)}})},this.Dequeue=function(){t.ThrowIfDispose();var e=new s.a;return t.subscribers.Add({deferral:e,type:r.Dequeue}),t.Drain(),e.Promise()},this.Peek=function(){t.ThrowIfDispose();var e=new s.a;return t.subscribers.Add({deferral:e,type:r.Peek}),t.Drain(),e.Promise()},this.Length=function(){return t.ThrowIfDispose(),t.list.Length()},this.IsDisposed=function(){return null==t.subscribers},this.DrainAndDispose=function(e,n){if(!t.IsDisposed()&&!t.isDisposing){for(t.disposeReason=n,t.isDisposing=!0;t.subscribers.Length()>0;)t.subscribers.RemoveFirst().deferral.Reject("Disposed");for(var r=0,o=t.detachables;r<o.length;r++)o[r].Detach();if(t.promiseStore.Length()>0&&e)return s.b.WhenAll(t.promiseStore.ToArray()).ContinueWith(function(){return t.subscribers=null,t.list.ForEach(function(t,n){e(t)}),t.list=null,!0});t.subscribers=null,t.list=null}return s.b.FromResult(!0)},this.Dispose=function(e){t.DrainAndDispose(null,e)},this.Drain=function(){if(!t.isDrainInProgress&&!t.isDisposing){for(t.isDrainInProgress=!0;t.list.Length()>0&&t.subscribers.Length()>0&&!t.isDisposing;){var e=t.subscribers.RemoveFirst();if(e.type===r.Peek)e.deferral.Resolve(t.list.First());else{var n=t.list.RemoveFirst();e.deferral.Resolve(n)}}t.isDrainInProgress=!1}},this.ThrowIfDispose=function(){if(t.IsDisposed()){if(t.disposeReason)throw new o.b(t.disposeReason);throw new o.c("Queue")}if(t.isDisposing)throw new o.b("Queue disposing")},this.list=e||new i.a,this.detachables=[],this.subscribers=new i.a,this.detachables.push(this.list.OnAdded(this.Drain))}return e}()},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"g",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"f",function(){return s}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return d});var r;!function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(r||(r={}));var o;!function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(o||(o={}));var i=function(){function e(e,t,n,i){void 0===t&&(t=r.Interactive),void 0===n&&(n="en-us"),void 0===i&&(i=o.Simple),this.recognitionMode=r.Interactive,this.speechConfig=e||new s(new u(null,null)),this.recognitionMode=t,this.language=n,this.format=i,this.recognitionActivityTimeout=t===r.Interactive?8e3:25e3}return Object.defineProperty(e.prototype,"RecognitionMode",{get:function(){return this.recognitionMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){return this.language},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Format",{get:function(){return this.format},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SpeechConfig",{get:function(){return this.speechConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RecognitionActivityTimeout",{get:function(){return this.recognitionActivityTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsContinuousRecognition",{get:function(){return this.recognitionMode!==r.Interactive},enumerable:!0,configurable:!0}),e}(),s=function(){function e(e){var t=this;this.Serialize=function(){return JSON.stringify(t,function(e,t){if(t&&"object"==typeof t){var n={};for(var r in t)Object.hasOwnProperty.call(t,r)&&(n[r&&r.charAt(0).toLowerCase()+r.substring(1)]=t[r]);return n}return t})},this.context=e}return Object.defineProperty(e.prototype,"Context",{get:function(){return this.context},enumerable:!0,configurable:!0}),e}(),u=function(){function e(e,t){this.system=new c,this.os=e,this.device=t}return Object.defineProperty(e.prototype,"System",{get:function(){return this.system},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"OS",{get:function(){return this.os},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Device",{get:function(){return this.device},enumerable:!0,configurable:!0}),e}(),c=function(){function e(){this.version="1.0.00000"}return Object.defineProperty(e.prototype,"Version",{get:function(){return this.version},enumerable:!0,configurable:!0}),e}(),a=function(){function e(e,t,n){this.platform=e,this.name=t,this.version=n}return Object.defineProperty(e.prototype,"Platform",{get:function(){return this.platform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Version",{get:function(){return this.version},enumerable:!0,configurable:!0}),e}(),d=function(){function e(e,t,n){this.manufacturer=e,this.model=t,this.version=n}return Object.defineProperty(e.prototype,"Manufacturer",{get:function(){return this.manufacturer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Model",{get:function(){return this.model},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Version",{get:function(){return this.version},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";var r=(n(39),n(40),n(41));n.d(t,"a",function(){return r.a});var o=(n(42),n(43));n.d(t,"b",function(){return o.a});var i=(n(44),n(45),n(46));n.d(t,"c",function(){return i.a}),n(15)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),o=function(){function e(e,t,n){var o=this;if(this.Open=function(){return o.connectionState===r.r.Disconnected?r.z.FromError("Cannot open a connection that is in "+o.connectionState+" state"):o.connectionEstablishDeferral?o.connectionEstablishDeferral.Promise():(o.connectionEstablishDeferral=new r.t,o.connectionState=r.r.Connecting,o.websocketClient=new WebSocket(o.uri),o.receivingMessageQueue=new r.A,o.disconnectDeferral=new r.t,o.sendMessageQueue=new r.A,o.ProcessSendQueue(),o.OnEvent(new r.q(o.connectionId,o.uri)),o.websocketClient.onopen=function(e){o.connectionState=r.r.Connected,o.OnEvent(new r.l(o.connectionId)),o.connectionEstablishDeferral.Resolve(new r.p(200,""))},o.websocketClient.onerror=function(e){o.connectionState,r.r.Connecting},o.websocketClient.onclose=function(e){o.connectionState===r.r.Connecting?(o.connectionState=r.r.Disconnected,o.OnEvent(new r.k(o.connectionId,e.code,e.reason)),o.connectionEstablishDeferral.Resolve(new r.p(e.code,e.reason))):o.OnEvent(new r.j(o.connectionId,e.code,e.reason)),o.OnClose(e.code,e.reason)},o.websocketClient.onmessage=function(e){var t=(new Date).toISOString();if(o.connectionState===r.r.Connected){var n=new r.t;if(o.receivingMessageQueue.EnqueueFromPromise(n.Promise()),e.data instanceof Blob){var i=new FileReader;i.onload=function(e){var s=new r.B(r.x.Binary,i.result);o.messageFormatter.ToConnectionMessage(s).On(function(e){o.OnEvent(new r.n(o.connectionId,t,e)),n.Resolve(e)},function(e){n.Reject("Invalid binary message format. Error: "+e)})},i.onerror=function(e){n.Reject("Binary message parse error")},i.readAsArrayBuffer(e.data)}else{var s=new r.B(r.x.Text,e.data);o.messageFormatter.ToConnectionMessage(s).On(function(e){o.OnEvent(new r.n(o.connectionId,t,e)),n.Resolve(e)},function(e){n.Reject("Invalid text message format. Error: "+e)})}}},o.connectionEstablishDeferral.Promise())},this.Send=function(e){if(o.connectionState!==r.r.Connected)return r.z.FromError("Cannot send on connection that is in "+o.connectionState+" state");var t=new r.t,n=new r.t;return o.sendMessageQueue.EnqueueFromPromise(n.Promise()),o.messageFormatter.FromConnectionMessage(e).On(function(r){n.Resolve({Message:e,RawWebsocketMessage:r,SendStatusDeferral:t})},function(e){n.Reject("Error formatting the message. "+e)}),t.Promise()},this.Read=function(){return o.connectionState!==r.r.Connected?r.z.FromError("Cannot read on connection that is in "+o.connectionState+" state"):o.receivingMessageQueue.Dequeue()},this.Close=function(e){if(!o.websocketClient){var t=new r.t;return t.Resolve(!0),t.Promise()}return o.connectionState!==r.r.Connected&&o.websocketClient.close(1e3,e||"Normal closure by client"),o.disconnectDeferral.Promise()},this.SendRawMessage=function(e){try{return o.OnEvent(new r.o(o.connectionId,(new Date).toISOString(),e.Message)),o.websocketClient.send(e.RawWebsocketMessage.Payload),r.z.FromResult(!0)}catch(e){return r.z.FromError("websocket send error: "+e)}},this.OnClose=function(e,t){var n="Connection closed. "+e+": "+t;o.connectionState=r.r.Disconnected,o.disconnectDeferral.Resolve(!0),o.receivingMessageQueue.Dispose(t),o.receivingMessageQueue.DrainAndDispose(function(e){},n),o.sendMessageQueue.DrainAndDispose(function(e){e.SendStatusDeferral.Reject(n)},n)},this.ProcessSendQueue=function(){o.sendMessageQueue.Dequeue().On(function(e){o.SendRawMessage(e).On(function(t){e.SendStatusDeferral.Resolve(t),o.ProcessSendQueue()},function(t){e.SendStatusDeferral.Reject(t),o.ProcessSendQueue()})},function(e){})},this.OnEvent=function(e){o.connectionEvents.OnEvent(e),r.w.Instance.OnEvent(e)},!e)throw new r.a("uri");if(!n)throw new r.a("messageFormatter");this.connectionEvents=new r.u,this.connectionId=t,this.messageFormatter=n,this.connectionState=r.r.None,this.uri=e}return Object.defineProperty(e.prototype,"State",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Events",{get:function(){return this.connectionEvents},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(14),o=n(0),i=n(3),s="testhooks",u="X-ConnectionId",c=function(){function e(){var e=this;this.Create=function(t,n,o){var c="";switch(t.RecognitionMode){case i.e.Conversation:c=e.Host+e.ConversationRelativeUri;break;case i.e.Dictation:c=e.Host+e.DictationRelativeUri;break;default:c=e.Host+e.InteractiveRelativeUri}var a={format:i.j[t.Format].toString().toLowerCase(),language:t.Language};e.IsDebugModeEnabled&&(a[s]="1");var d={};return d[n.HeaderName]=n.Token,d[u]=o,new r.c(c,a,d,new i.k,o)}}return Object.defineProperty(e.prototype,"Host",{get:function(){return o.D.Local.GetOrAdd("Host","wss://speech.platform.bing.com")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"InteractiveRelativeUri",{get:function(){return o.D.Local.GetOrAdd("InteractiveRelativeUri","/speech/recognition/interactive/cognitiveservices/v1")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ConversationRelativeUri",{get:function(){return o.D.Local.GetOrAdd("ConversationRelativeUri","/speech/recognition/conversation/cognitiveservices/v1")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DictationRelativeUri",{get:function(){return o.D.Local.GetOrAdd("DictationRelativeUri","/speech/recognition/dictation/cognitiveservices/v1")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsDebugModeEnabled",{get:function(){return"true"===o.D.Local.GetOrAdd("IsDebugModeEnabled","false").toLowerCase()},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18);if(void 0===Promise)throw new Error("Promises are not supported in this browser. Use this polyfill: https://www.npmjs.com/package/es6-promise");navigator.mediaDevices||(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia=navigator.mediaDevices.getUserMedia||function(){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return function(t){return e?new Promise(function(n,r){e.call(navigator,t,n,r)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}}(),function(e){window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition||r.a}(window.SpeechRecognition||window.webkitSpeechRecognition)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(19),o=n(3),i=n(37),s=function(){function e(e){this.apiKey=e,this.recognizer=null,this.onaudiostart=null,this.onaudioend=null,this.onstart=null,this.onend=null,this.onerror=null,this.onnomatch=null,this.onresult=null,this.lang=document.documentElement.lang||navigator.language,this.continuous=!1,this.interimResults=!1,this.maxAlternatives=1,this.serviceURI="https://api.cognitive.microsoft.com/sts/v1.0"}return e.prototype.start=function(){if(!this.recognizer){if(!this.apiKey)throw new Error("no api key specified");this.recognizer=this.setupRecognizer()}this.recognizer.Recognize(this.handleEvent.bind(this)).On(this.recognitionStartSuccess.bind(this),this.recognitionStartFailed.bind(this))},e.prototype.stop=function(){this.recognizer&&this.recognizer.AudioSource.TurnOff()},e.prototype.abort=function(){this.recognizer&&this.recognizer.AudioSource.TurnOff()},e.prototype.handleEvent=function(e){console.log(e.name+" triggered"),e.result&&this.handleResult(e.result),e.error&&console.error(e.error)},e.prototype.handleResult=function(e){switch(o.f[e.RecognitionStatus]){case o.f.Success:console.log("got something",e);break;case o.f.Error:console.log("error",e);break;case o.f.NoMatch:console.log("no match",e);break;case o.f.InitialSilenceTimeout:case o.f.EndOfDictation:case o.f.BabbleTimeout:console.log("something happened",e);break;default:console.log("falled into default",e)}},e.prototype.recognitionStartSuccess=function(e){console.log("recognition started")},e.prototype.recognitionStartFailed=function(e){console.log("recognition start failed",e)},e.prototype.setupRecognizer=function(){var e=new o.i(new o.b(new o.d("Speech","Speech",null),new o.c(navigator.userAgent,"Browser","1.0.0.0"))),t=this.interimResults?o.e.Conversation:o.e.Dictation,n=Object(r.a)(this.lang),s=o.j.Detailed,u=new o.h(e,t,n,s),c=new o.a(this.apiKey);return Object(i.a)(u,c)},e}()},function(e,t,n){"use strict";var r=n(20);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r={ar:"ar-EG",ca:"ca-ES",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",hi:"hi-IN",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-PT",ru:"ru-RU",sv:"sv-SE",zh:"zh-CN"},o=function(e){return r[e]||e}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(5),i="Ocp-Apim-Subscription-Key",s=function(){function e(e){var t=this;if(this.Fetch=function(e){return r.z.FromResult(t.authInfo)},this.FetchOnExpiry=function(e){return r.z.FromResult(t.authInfo)},!e)throw new r.a("subscriptionKey");this.authInfo=new o.a(i,e)}return e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return c}),n.d(t,"a",function(){return a}),n.d(t,"f",function(){return f}),n.d(t,"e",function(){return l}),n.d(t,"g",function(){return h}),n.d(t,"h",function(){return p});var r=n(4),o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(t,n,o){void 0===o&&(o=r.a.Info);var i=e.call(this,t,o)||this;return i.audioSourceId=n,i}return o(t,e),Object.defineProperty(t.prototype,"AudioSourceId",{get:function(){return this.audioSourceId},enumerable:!0,configurable:!0}),t}(r.b),s=function(e){function t(t){return e.call(this,"AudioSourceInitializingEvent",t)||this}return o(t,e),t}(i),u=function(e){function t(t){return e.call(this,"AudioSourceReadyEvent",t)||this}return o(t,e),t}(i),c=function(e){function t(t){return e.call(this,"AudioSourceOffEvent",t)||this}return o(t,e),t}(i),a=function(e){function t(t,n){var o=e.call(this,"AudioSourceErrorEvent",t,r.a.Error)||this;return o.error=n,o}return o(t,e),Object.defineProperty(t.prototype,"Error",{get:function(){return this.error},enumerable:!0,configurable:!0}),t}(i),d=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.audioNodeId=r,o}return o(t,e),Object.defineProperty(t.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),t}(i),f=function(e){function t(t,n){return e.call(this,"AudioStreamNodeAttachingEvent",t,n)||this}return o(t,e),t}(d),l=function(e){function t(t,n){return e.call(this,"AudioStreamNodeAttachedEvent",t,n)||this}return o(t,e),t}(d),h=function(e){function t(t,n){return e.call(this,"AudioStreamNodeDetachedEvent",t,n)||this}return o(t,e),t}(d),p=function(e){function t(t,n,r){var o=e.call(this,"AudioStreamNodeErrorEvent",t,n)||this;return o.error=r,o}return o(t,e),Object.defineProperty(t.prototype,"Error",{get:function(){return this.error},enumerable:!0,configurable:!0}),t}(d)},function(e,t,n){"use strict";n.d(t,"f",function(){return s}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return f});var r=n(4),o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){function t(t,n,o){void 0===o&&(o=r.a.Info);var i=e.call(this,t,o)||this;return i.connectionId=n,i}return o(t,e),Object.defineProperty(t.prototype,"ConnectionId",{get:function(){return this.connectionId},enumerable:!0,configurable:!0}),t}(r.b),s=function(e){function t(t,n,r){var o=e.call(this,"ConnectionStartEvent",t)||this;return o.uri=n,o.headers=r,o}return o(t,e),Object.defineProperty(t.prototype,"Uri",{get:function(){return this.uri},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Headers",{get:function(){return this.headers},enumerable:!0,configurable:!0}),t}(i),u=function(e){function t(t,n){return e.call(this,"ConnectionEstablishedEvent",t)||this}return o(t,e),t}(i),c=function(e){function t(t,n,o){var i=e.call(this,"ConnectionClosedEvent",t,r.a.Warning)||this;return i.reason=o,i.statusCode=n,i}return o(t,e),Object.defineProperty(t.prototype,"Reason",{get:function(){return this.reason},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StatusCode",{get:function(){return this.statusCode},enumerable:!0,configurable:!0}),t}(i),a=function(e){function t(t,n,o){var i=e.call(this,"ConnectionEstablishErrorEvent",t,r.a.Error)||this;return i.statusCode=n,i.reason=o,i}return o(t,e),Object.defineProperty(t.prototype,"Reason",{get:function(){return this.reason},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"StatusCode",{get:function(){return this.statusCode},enumerable:!0,configurable:!0}),t}(i),d=function(e){function t(t,n,r){var o=e.call(this,"ConnectionMessageReceivedEvent",t)||this;return o.networkReceivedTime=n,o.message=r,o}return o(t,e),Object.defineProperty(t.prototype,"NetworkReceivedTime",{get:function(){return this.networkReceivedTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Message",{get:function(){return this.message},enumerable:!0,configurable:!0}),t}(i),f=function(e){function t(t,n,r){var o=e.call(this,"ConnectionMessageSentEvent",t)||this;return o.networkSentTime=n,o.message=r,o}return o(t,e),Object.defineProperty(t.prototype,"NetworkSentTime",{get:function(){return this.networkSentTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Message",{get:function(){return this.message},enumerable:!0,configurable:!0}),t}(i)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e,t){this.statusCode=e,this.reason=t}return Object.defineProperty(e.prototype,"StatusCode",{get:function(){return this.statusCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Reason",{get:function(){return this.reason},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(8),i=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return e.instance},enumerable:!0,configurable:!0}),e.instance=new o.a,e.SetEventSource=function(t){if(!t)throw new r.a("eventSource");e.instance=t},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r;!function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(7),o=n(1),i=n(2),s=function(){function e(e,t,n){if(this.payload=null,!t)throw new o.a("payload");if(e===r.b.Binary&&!(t instanceof ArrayBuffer))throw new o.b("Payload must be ArrayBuffer");if(e===r.b.Text&&"string"!=typeof t)throw new o.b("Payload must be a string");this.messageType=e,this.payload=t,this.id=n||Object(i.a)()}return Object.defineProperty(e.prototype,"MessageType",{get:function(){return this.messageType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Payload",{get:function(){return this.payload},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TextContent",{get:function(){if(this.messageType===r.b.Binary)throw new o.b("Not supported for binary message");return this.payload},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BinaryContent",{get:function(){if(this.messageType===r.b.Text)throw new o.b("Not supported for text message");return this.payload},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e,t){var n=this;this.channelCount=1,this.Encode=function(e,t){var r=n.DownSampleAudioFrame(t,n.actualSampleRate,n.desiredSampleRate),o=2*r.length;if(!e){var i=new ArrayBuffer(o),s=new DataView(i);return n.FloatTo16BitPCM(s,0,r),i}var u=new ArrayBuffer(44+o),c=new DataView(u);return n.SetString(c,0,"RIFF"),c.setUint32(4,0,!0),n.SetString(c,8,"WAVEfmt "),c.setUint32(16,16,!0),c.setUint16(20,1,!0),c.setUint16(22,n.channelCount,!0),c.setUint32(24,n.desiredSampleRate,!0),c.setUint32(28,n.desiredSampleRate*n.channelCount*2,!0),c.setUint16(32,2*n.channelCount,!0),c.setUint16(34,16,!0),n.SetString(c,36,"data"),c.setUint32(40,0,!0),n.FloatTo16BitPCM(c,44,r),u},this.SetString=function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},this.FloatTo16BitPCM=function(e,t,n){for(var r=0;r<n.length;r++,t+=2){var o=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,o<0?32768*o:32767*o,!0)}},this.DownSampleAudioFrame=function(e,t,n){if(n===t||n>t)return e;for(var r=t/n,o=Math.round(e.length/r),i=new Float32Array(o),s=0,u=0;s<i.length;){for(var c=Math.round((s+1)*r),a=0,d=0,f=u;f<c&&f<e.length;f++)a+=e[f],d++;i[s]=a/d,s++,u=c}return i},this.actualSampleRate=e,this.desiredSampleRate=t}return e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),o=n(9),i=function(){function e(){}return Object.defineProperty(e,"Session",{get:function(){return e.sessionStorage},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Local",{get:function(){return e.localStorage},enumerable:!0,configurable:!0}),e.sessionStorage=new o.a,e.localStorage=new o.a,e.SetSessionStorage=function(t){if(!t)throw new r.a("sessionStorage");e.sessionStorage=t},e.SetLocalStorage=function(t){if(!t)throw new r.a("localStorage");e.localStorage=t},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),o=n(2),i=n(12),s=function(){function e(e){var t=this;this.readerIdCounter=1,this.isEnded=!1,this.Write=function(e){t.ThrowIfClosed(),t.WriteStreamChunk({Buffer:e,IsEnd:!1})},this.GetReader=function(){var e=t.readerIdCounter;t.readerIdCounter++;var n=new i.a,r=t.streambuffer.length;t.readerQueues[e]=n;for(var o=0;o<r;o++)n.Enqueue(t.streambuffer[o]);return new u(t.id,n,function(){delete t.readerQueues[e]})},this.Close=function(){t.isEnded||(t.WriteStreamChunk({Buffer:null,IsEnd:!0}),t.isEnded=!0)},this.WriteStreamChunk=function(e){t.ThrowIfClosed(),t.streambuffer.push(e);for(var n in t.readerQueues)if(!t.readerQueues[n].IsDisposed())try{t.readerQueues[n].Enqueue(e)}catch(e){}},this.ThrowIfClosed=function(){if(t.isEnded)throw new r.b("Stream closed")},this.id=e||Object(o.a)(),this.streambuffer=[],this.readerQueues={}}return Object.defineProperty(e.prototype,"IsClosed",{get:function(){return this.isEnded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),e}(),u=function(){function e(e,t,n){var o=this;this.isClosed=!1,this.Read=function(){if(o.IsClosed)throw new r.b("StreamReader closed");return o.readerQueue.Dequeue().OnSuccessContinueWith(function(e){return e.IsEnd&&o.readerQueue.Dispose("End of stream reached"),e})},this.Close=function(){o.isClosed||(o.isClosed=!0,o.readerQueue.Dispose("StreamReader closed"),o.onClose())},this.readerQueue=t,this.onClose=n,this.streamId=e}return Object.defineProperty(e.prototype,"IsClosed",{get:function(){return this.isClosed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"StreamId",{get:function(){return this.streamId},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n(0),n(5)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(6),i=n(13),s=n(33),u=n(34),c=function(){function e(e,t,n,o){var s=this;if(this.Recognize=function(e,t){var n=new a(s.audioSource.Id(),e);return n.ListenForServiceTelemetry(s.audioSource.Events),s.audioSource.Attach(n.AudioNodeId).ContinueWithPromise(function(e){if(e.IsError)throw n.OnAudioSourceAttachCompleted(null,!0,e.Error),new Error(e.Error);n.OnAudioSourceAttachCompleted(e.Result,!1);var o=e.Result;return s.FetchConnection(n).OnSuccessContinueWith(function(e){var i=s.ReceiveMessage(e,n),u=s.SendSpeechConfig(n.RequestId,e,s.recognizerConfig.SpeechConfig.Serialize()).OnSuccessContinueWithPromise(function(r){return s.SendSpeechContext(n.RequestId,e,t).OnSuccessContinueWithPromise(function(t){return s.SendAudio(n.RequestId,e,o,n)})}),c=r.z.WhenAll([i,u]);return c.On(function(t){n.Dispose(),s.SendTelemetryData(n.RequestId,e,n.GetTelemetry())},function(t){n.Dispose(t),s.SendTelemetryData(n.RequestId,e,n.GetTelemetry())}),c}),n.CompletionPromise})},this.FetchConnection=function(e,t){if(void 0===t&&(t=!1),s.connectionFetchPromise)return s.connectionFetchPromise.Result().IsError||s.connectionFetchPromise.Result().Result.State()===r.r.Disconnected?(s.connectionId=null,s.connectionFetchPromise=null,s.FetchConnection(e)):(e.OnPreConnectionStart(s.authFetchEventId,s.connectionId),e.OnConnectionEstablishCompleted(200),e.ListenForServiceTelemetry(s.connectionFetchPromise.Result().Result.Events),s.connectionFetchPromise);s.authFetchEventId=Object(r.s)(),s.connectionId=Object(r.s)(),e.OnPreConnectionStart(s.authFetchEventId,s.connectionId);var n=t?s.authentication.FetchOnExpiry(s.authFetchEventId):s.authentication.Fetch(s.authFetchEventId);return s.connectionFetchPromise=n.ContinueWithPromise(function(n){if(n.IsError)throw e.OnAuthCompleted(!0,n.Error),new Error(n.Error);e.OnAuthCompleted(!1);var o=s.connectionFactory.Create(s.recognizerConfig,n.Result,s.connectionId);return e.ListenForServiceTelemetry(o.Events),o.Open().OnSuccessContinueWithPromise(function(n){return 200===n.StatusCode?(e.OnConnectionEstablishCompleted(n.StatusCode),r.z.FromResult(o)):403!==n.StatusCode||t?(e.OnConnectionEstablishCompleted(n.StatusCode,n.Reason),r.z.FromError("Unable to contact server. StatusCode: "+n.StatusCode+", Reason: "+n.Reason)):s.FetchConnection(e,!0)})}),s.connectionFetchPromise},this.ReceiveMessage=function(e,t){return e.Read().OnSuccessContinueWithPromise(function(n){var o=u.a.FromConnectionMessage(n);if(o.RequestId.toLowerCase()===t.RequestId.toLowerCase())switch(o.Path.toLowerCase()){case"turn.start":t.OnServiceTurnStartResponse(JSON.parse(o.TextBody));break;case"speech.startDetected":t.OnServiceSpeechStartDetectedResponse(JSON.parse(o.TextBody));break;case"speech.hypothesis":t.OnServiceSpeechHypothesisResponse(JSON.parse(o.TextBody));break;case"speech.enddetected":t.OnServiceSpeechEndDetectedResponse(JSON.parse(o.TextBody));break;case"speech.phrase":s.recognizerConfig.IsContinuousRecognition&&s.SendTelemetryData(t.RequestId,e,t.GetTelemetry()),s.recognizerConfig.Format===i.g.Simple?t.OnServiceSimpleSpeechPhraseResponse(JSON.parse(o.TextBody)):t.OnServiceDetailedSpeechPhraseResponse(JSON.parse(o.TextBody));break;case"turn.end":return t.OnServiceTurnEndResponse(),r.z.FromResult(!0)}return s.ReceiveMessage(e,t)})},this.SendSpeechConfig=function(e,t,n){return n&&s.connectionId!==s.speechConfigConnectionId?(s.speechConfigConnectionId=s.connectionId,t.Send(new u.a(r.x.Text,"speech.config",e,"application/json",n))):r.z.FromResult(!0)},this.SendSpeechContext=function(e,t,n){return n?t.Send(new u.a(r.x.Text,"speech.context",e,"application/json",n)):r.z.FromResult(!0)},this.SendTelemetryData=function(e,t,n){return t.Send(new u.a(r.x.Text,"telemetry",e,"application/json",n))},this.SendAudio=function(e,t,n,o){return n.Read().OnSuccessContinueWithPromise(function(i){return o.IsSpeechEnded?r.z.FromResult(!0):i.IsEnd?t.Send(new u.a(r.x.Binary,"audio",e,null,null)):t.Send(new u.a(r.x.Binary,"audio",e,null,i.Buffer)).OnSuccessContinueWithPromise(function(r){return s.SendAudio(e,t,n,o)})})},!e)throw new r.a("authentication");if(!t)throw new r.a("connectionFactory");if(!n)throw new r.a("audioSource");if(!o)throw new r.a("recognizerConfig");this.authentication=e,this.connectionFactory=t,this.audioSource=n,this.recognizerConfig=o}return Object.defineProperty(e.prototype,"AudioSource",{get:function(){return this.audioSource},enumerable:!0,configurable:!0}),e}(),a=function(){function e(e,t){var n=this;this.isDisposed=!1,this.detachables=new Array,this.isAudioNodeDetached=!1,this.isCompleted=!1,this.OnAudioSourceAttachCompleted=function(e,t,r){n.audioNode=e,t?n.OnComplete(o.c.AudioSourceError,r):n.OnEvent(new o.b(n.requestId,n.audioSourceId,n.audioNodeId))},this.OnPreConnectionStart=function(e,t){n.authFetchEventId=e,n.connectionId=t,n.OnEvent(new o.a(n.requestId,n.authFetchEventId,n.connectionId))},this.OnAuthCompleted=function(e,t){e&&n.OnComplete(o.c.AuthTokenFetchError,t)},this.OnConnectionEstablishCompleted=function(e,t){if(200===e)return void n.OnEvent(new o.e(n.RequestId,n.audioSourceId,n.audioNodeId,n.authFetchEventId,n.connectionId));403===e?n.OnComplete(o.c.UnAuthorized,t):n.OnComplete(o.c.ConnectError,t)},this.OnServiceTurnStartResponse=function(e){e&&e.context&&e.context.serviceTag&&(n.serviceTag=e.context.serviceTag)},this.OnServiceSpeechStartDetectedResponse=function(e){n.OnEvent(new o.k(n.RequestId,e))},this.OnServiceSpeechHypothesisResponse=function(e){n.OnEvent(new o.i(n.RequestId,e))},this.OnServiceSpeechEndDetectedResponse=function(e){n.DetachAudioNode(),n.OnEvent(new o.h(n.RequestId,e))},this.OnServiceSimpleSpeechPhraseResponse=function(e){n.OnEvent(new o.j(n.RequestId,e))},this.OnServiceDetailedSpeechPhraseResponse=function(e){n.OnEvent(new o.g(n.RequestId,e))},this.OnServiceTurnEndResponse=function(){n.OnComplete(o.c.Success)},this.OnConnectionError=function(e){n.OnComplete(o.c.UnknownError,e)},this.Dispose=function(e){if(!n.isDisposed){n.OnComplete(o.c.UnknownError,e),n.isDisposed=!0;for(var t=0,r=n.detachables;t<r.length;t++)r[t].Detach();n.serviceTelemetryListener.Dispose()}},this.GetTelemetry=function(){return n.serviceTelemetryListener.GetTelemetry()},this.OnComplete=function(e,t){n.isCompleted||(n.isCompleted=!0,n.DetachAudioNode(),n.OnEvent(new o.d(n.RequestId,n.audioSourceId,n.audioNodeId,n.authFetchEventId,n.connectionId,n.serviceTag,e,t||"")))},this.DetachAudioNode=function(){n.isAudioNodeDetached||(n.isAudioNodeDetached=!0,n.audioNode&&n.audioNode.Detach())},this.OnEvent=function(e){n.serviceTelemetryListener.OnEvent(e),r.w.Instance.OnEvent(e),n.onEventCallback&&n.onEventCallback(e)},this.audioSourceId=e,this.onEventCallback=t,this.requestId=Object(r.s)(),this.audioNodeId=Object(r.s)(),this.requestCompletionDeferral=new r.t,this.serviceTelemetryListener=new s.a(this.requestId,this.audioSourceId,this.audioNodeId),this.OnEvent(new o.f(this.RequestId,this.audioSourceId,this.audioNodeId))}return Object.defineProperty(e.prototype,"RequestId",{get:function(){return this.requestId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AudioNodeId",{get:function(){return this.audioNodeId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CompletionPromise",{get:function(){return this.requestCompletionDeferral.Promise()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsSpeechEnded",{get:function(){return this.isAudioNodeDetached},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsCompleted",{get:function(){return this.isCompleted},enumerable:!0,configurable:!0}),e.prototype.ListenForServiceTelemetry=function(e){this.detachables.push(e.AttachListener(this.serviceTelemetryListener))},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=n(6),i=function(){function e(e,t,n){var i=this;this.isDisposed=!1,this.listeningTriggerMetric=null,this.micMetric=null,this.connectionEstablishMetric=null,this.OnEvent=function(e){i.isDisposed||(e instanceof o.f&&e.RequestId===i.requestId&&(i.listeningTriggerMetric={End:e.EventTime,Name:"ListeningTrigger",Start:e.EventTime}),e instanceof r.g&&e.AudioSourceId===i.audioSourceId&&e.AudioNodeId===i.audioNodeId&&(i.micStartTime=e.EventTime),e instanceof r.f&&e.AudioSourceId===i.audioSourceId&&e.AudioNodeId===i.audioNodeId&&(i.micStartTime=e.EventTime),e instanceof r.b&&e.AudioSourceId===i.audioSourceId&&(i.micMetric||(i.micMetric={End:e.EventTime,Error:e.Error,Name:"Microphone",Start:i.micStartTime})),e instanceof r.i&&e.AudioSourceId===i.audioSourceId&&e.AudioNodeId===i.audioNodeId&&(i.micMetric||(i.micMetric={End:e.EventTime,Error:e.Error,Name:"Microphone",Start:i.micStartTime})),e instanceof r.h&&e.AudioSourceId===i.audioSourceId&&e.AudioNodeId===i.audioNodeId&&(i.micMetric||(i.micMetric={End:e.EventTime,Name:"Microphone",Start:i.micStartTime})),e instanceof o.a&&e.RequestId===i.requestId&&(i.connectionId=e.ConnectionId),e instanceof r.q&&e.ConnectionId===i.connectionId&&(i.connectionStartTime=e.EventTime),e instanceof r.l&&e.ConnectionId===i.connectionId&&(i.connectionEstablishMetric||(i.connectionEstablishMetric={End:e.EventTime,Id:i.connectionId,Name:"Connection",Start:i.connectionStartTime})),e instanceof r.k&&e.ConnectionId===i.connectionId&&(i.connectionEstablishMetric||(i.connectionEstablishMetric={End:e.EventTime,Error:i.GetConnectionError(e.StatusCode),Id:i.connectionId,Name:"Connection",Start:i.connectionStartTime})),e instanceof r.n&&e.ConnectionId===i.connectionId&&e.Message&&e.Message.Headers&&e.Message.Headers.path&&(i.receivedMessages[e.Message.Headers.path]||(i.receivedMessages[e.Message.Headers.path]=new Array),i.receivedMessages[e.Message.Headers.path].push(e.NetworkReceivedTime)))},this.GetTelemetry=function(){var e=new Array;i.listeningTriggerMetric&&e.push(i.listeningTriggerMetric),i.micMetric&&e.push(i.micMetric),i.connectionEstablishMetric&&e.push(i.connectionEstablishMetric);var t={Metrics:e,ReceivedMessages:i.receivedMessages},n=JSON.stringify(t);return i.receivedMessages={},i.listeningTriggerMetric=null,i.micMetric=null,i.connectionEstablishMetric=null,n},this.Dispose=function(){i.isDisposed=!0},this.GetConnectionError=function(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}},this.requestId=e,this.audioSourceId=t,this.audioNodeId=n,this.receivedMessages={}}return e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i="path",s="content-type",u="x-requestid",c="x-timestamp",a=function(e){function t(t,n,o,a,d,f,l){var h=this;if(!n)throw new r.a("path");if(!o)throw new r.a("requestId");var p={};if(p[i]=n,p[u]=o,p[c]=(new Date).toISOString(),a&&(p[s]=a),f)for(var g in f)g&&(p[g]=f[g]);return h=l?e.call(this,t,d,p,l)||this:e.call(this,t,d,p)||this,h.path=n,h.requestId=o,h.contentType=a,h.additionalHeaders=f,h}return o(t,e),Object.defineProperty(t.prototype,"Path",{get:function(){return this.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RequestId",{get:function(){return this.requestId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ContentType",{get:function(){return this.contentType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"AdditionalHeaders",{get:function(){return this.additionalHeaders},enumerable:!0,configurable:!0}),t.FromConnectionMessage=function(e){var n=null,r=null,o=null,a={};if(e.Headers)for(var d in e.Headers)d&&(d.toLowerCase()===i.toLowerCase()?n=e.Headers[d]:d.toLowerCase()===u.toLowerCase()?r=e.Headers[d]:d.toLowerCase()===c.toLowerCase()?e.Headers[d]:d.toLowerCase()===s.toLowerCase()?o=e.Headers[d]:a[d]=e.Headers[d]);return new t(e.MessageType,n,r,o,e.Body,a,e.Id)},t}(r.m)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r;!function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation"}(r||(r={}))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o="\r\n",i=function(){function e(){var e=this;this.ToConnectionMessage=function(t){var n=new r.t;try{if(t.MessageType===r.x.Text){var o=t.TextContent,i={},s=null;if(o){var u=o.split("\r\n\r\n");u&&u.length>0&&(i=e.ParseHeaders(u[0]),u.length>1&&(s=u[1]))}n.Resolve(new r.m(t.MessageType,s,i,t.Id))}else if(t.MessageType===r.x.Binary){var c=t.BinaryContent,i={},s=null;if(!c||c.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");var a=new DataView(c),d=a.getInt16(0);if(c.byteLength<d+2)throw new Error("Invalid binary message format. Header content missing.");for(var f="",l=0;l<d;l++)f+=String.fromCharCode(a.getInt8(l+2));i=e.ParseHeaders(f),c.byteLength>d+2&&(s=c.slice(2+d)),n.Resolve(new r.m(t.MessageType,s,i,t.Id))}}catch(e){n.Reject("Error formatting the message. Error: "+e)}return n.Promise()},this.FromConnectionMessage=function(t){var n=new r.t;try{if(t.MessageType===r.x.Text){var i=""+e.MakeHeaders(t)+o+(t.TextBody?t.TextBody:"");n.Resolve(new r.B(r.x.Text,i,t.Id))}else if(t.MessageType===r.x.Binary){var s=e.MakeHeaders(t),u=t.BinaryBody,c=new FileReader;c.onload=function(){var e=new Int8Array(c.result),o=new ArrayBuffer(2+e.byteLength+(u?u.byteLength:0)),i=new DataView(o);i.setInt16(0,e.length);for(var s=0;s<e.byteLength;s++)i.setInt8(2+s,e[s]);if(u)for(var a=new Int8Array(u),s=0;s<a.byteLength;s++)i.setInt8(2+e.byteLength+s,a[s]);n.Resolve(new r.B(r.x.Binary,o,t.Id))},c.onerror=function(){n.Reject("failed to load headers into file reader")},c.readAsArrayBuffer(new Blob([s]))}}catch(e){n.Reject("Error formatting the message. "+e)}return n.Promise()},this.MakeHeaders=function(e){var t="";if(e.Headers)for(var n in e.Headers)n&&(t+=n+": "+e.Headers[n]+o);return t},this.ParseHeaders=function(e){var t={};if(e){var n=e.match(/[^\r\n]+/g);if(t)for(var r=0,o=n;r<o.length;r++){var i=o[r];if(i){var s=i.indexOf(":"),u=s>0?i.substr(0,s).trim().toLowerCase():i,c=s>0&&i.length>s+1?i.substr(s+1).trim():"";t[u]=c}}}return t}}return e}()},function(e,t,n){"use strict";var r=n(38);n.d(t,"a",function(){return r.a}),n(16)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(14),o=n(3),i=n(16),s=function(e,t){return u(e,t)},u=function(e,t){return c(e,t,new r.a(new r.b))},c=function(e,t,n){return new o.g(t,new i.a,n,e)}},function(e,t,n){"use strict";n(0)},function(e,t,n){"use strict";n(0)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),o=function(){function e(e,t){var n=this;this.streams={},this.TurnOn=function(){if(n.initializeDeferral)return n.initializeDeferral.Promise();if(n.initializeDeferral=new r.t,window.navigator,window.navigator.getUserMedia=window.navigator.getUserMedia||window.navigator.webkitGetUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia,window.navigator.getUserMedia)n.OnEvent(new r.c(n.id)),window.navigator.getUserMedia({audio:!0},function(e){n.mediaStream=e,n.OnEvent(new r.e(n.id)),n.initializeDeferral.Resolve(!0)},function(e){var t="Error occured processing the user media stream. "+e;n.initializeDeferral.Reject(t),n.OnEvent(new r.b(n.id,t))});else{var e="Browser doesnot support getUserMedia.";n.initializeDeferral.Reject(e),n.OnEvent(new r.b(e,""))}return n.initializeDeferral.Promise()},this.Id=function(){return n.id},this.Attach=function(e){return n.OnEvent(new r.g(n.id,e)),n.Listen(e).OnSuccessContinueWith(function(t){return n.OnEvent(new r.f(n.id,e)),{Detach:function(){t.Close(),delete n.streams[e],n.OnEvent(new r.h(n.id,e)),n.TurnOff()},Id:function(){return e},Read:function(){return t.Read()}}})},this.Detach=function(e){e&&n.streams[e]&&(n.streams[e].Close(),delete n.streams[e],n.OnEvent(new r.h(n.id,e)))},this.TurnOff=function(){for(var e in n.streams)if(e){var t=n.streams[e];t&&t.Close()}return n.recorder.ReleaseMediaResources(),n.OnEvent(new r.d(n.id)),n.initializeDeferral=null,r.z.FromResult(!0)},this.Listen=function(e){return n.TurnOn().OnSuccessContinueWith(function(t){var o=new r.E(e);n.streams[e]=o;try{n.recorder.Record(n.mediaStream,o)}catch(t){var i="Error occured processing the user media stream. "+t;n.initializeDeferral.Reject(i),n.OnEvent(new r.i(n.id,e,t))}return o.GetReader()})},this.OnEvent=function(e){n.events.OnEvent(e),r.w.Instance.OnEvent(e)},this.id=t||Object(r.s)(),this.events=new r.u,this.recorder=e}return Object.defineProperty(e.prototype,"Events",{get:function(){return this.events},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict"},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),o=function(){function e(){var e=this;this.Record=function(t,n){var o=new AudioContext,i=o.createMediaStreamSource(t),s=2048,u=!1;64e3<=i.context.sampleRate?s=8192:32e3<=i.context.sampleRate&&(s=4096);var c=i.context.createScriptProcessor(s,1,1),a=new r.C(i.context.sampleRate,16e3);c.onaudioprocess=function(e){var t,r,o=e.inputBuffer.getChannelData(0);n&&(u?(r||(r=a.Encode(!1,o)),n.Write(r)):(t||(t=a.Encode(!0,o)),n.Write(t),u=!0))},e.mediaResources={context:o,scriptProcessorNode:c,source:i,stream:t},i.connect(c),c.connect(i.context.destination)},this.ReleaseMediaResources=function(){e.mediaResources&&(e.mediaResources.scriptProcessorNode&&(e.mediaResources.scriptProcessorNode.disconnect(),e.mediaResources.scriptProcessorNode=null),e.mediaResources.source&&(e.mediaResources.source.disconnect(),e.mediaResources.stream.getTracks().forEach(function(e){return e.stop()}),e.mediaResources.source=null),e.mediaResources.context&&"closed"!==e.mediaResources.context.state&&e.mediaResources.context.close())}}return e}()},function(e,t,n){"use strict";n(0)},function(e,t,n){"use strict"},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=n(15),i=function(){function e(e,t,n,i,s){var u=this;if(this.isDisposed=!1,this.Dispose=function(){u.isDisposed=!0,u.connectionMessageAdapter&&u.connectionMessageAdapter.Close()},this.IsDisposed=function(){return u.isDisposed},this.State=function(){return u.connectionMessageAdapter.State},this.Open=function(){return u.connectionMessageAdapter.Open()},this.Send=function(e){return u.connectionMessageAdapter.Send(e)},this.Read=function(){return u.connectionMessageAdapter.Read()},!e)throw new r.a("uri");if(!i)throw new r.a("messageFormatter");this.messageFormatter=i;var c="",a=0;if(t)for(var d in t)if(d){c+=0===a?"?":"&";var f=encodeURIComponent(t[d]);c+=d+"="+f,a++}if(n)for(var l in n)if(l){c+=0===a?"?":"&";var f=encodeURIComponent(n[l]);c+=l+"="+f,a++}this.uri=e+c,this.id=s||Object(r.s)(),this.connectionMessageAdapter=new o.a(this.uri,this.Id,this.messageFormatter)}return Object.defineProperty(e.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Events",{get:function(){return this.connectionMessageAdapter.Events},enumerable:!0,configurable:!0}),e}()}]);